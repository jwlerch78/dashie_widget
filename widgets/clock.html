<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Clock with Weather</title>
<link rel="stylesheet" href="../css/core/variables.css">
<style>
html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  background: var(--bg-primary, #000);
  color: var(--text-primary, #fff);
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  height: 100%;
  width: 100%;
  box-sizing: border-box;
}

/* Container that fills the entire space */
.clock-container {
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 100vh;
  width: 100vw;
  padding: 0 20px;
  box-sizing: border-box;
  background: var(--bg-primary, #000);
}

#time {
  font-size: 10vw;
  font-weight: bold;
  text-align: right;
  color: var(--text-primary, #fff);
}

#weather {
  font-size: 6vw;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  color: var(--text-primary, #fff);
}

#weather-icon {
  margin-right: 15px;
}
</style>
</head>
<body>
  <div class="clock-container">
    <!-- Swapped the order: weather first, then time -->
    <div id="weather">
      <span id="weather-icon">☀️</span>
      <span id="temperature">--°F</span>
    </div>
    <div id="time">--:--</div>
  </div>

<script>
function updateTime() {
  const now = new Date();
  let hours = now.getHours();
  const minutes = now.getMinutes().toString().padStart(2,'0');
  const ampm = hours >= 12 ? 'PM' : 'AM';
  hours = hours % 12 || 12;
  document.getElementById('time').textContent = `${hours}:${minutes} ${ampm}`;
}

// Belleair, FL coordinates
const latitude = 27.9186;
const longitude = -82.8053;

const weatherIcons = {
  0: '☀️', 1: '🌤️', 2: '⛅', 3: '☁️',
  45: '🌫️', 48: '🌫️', 51: '🌦️', 53: '🌦️', 55: '🌧️',
  56: '🌧️', 57: '🌧️', 61: '🌧️', 63: '🌧️', 65: '🌧️',
  66: '❄️', 67: '❄️', 71: '❄️', 73: '❄️', 75: '❄️',
  80: '🌧️', 81: '🌧️', 82: '🌧️', 95: '⛈️', 96: '⛈️', 99: '⛈️'
};

async function updateWeather() {
  const url = `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true&temperature_unit=fahrenheit`;
  try {
    const res = await fetch(url);
    const data = await res.json();
    const weatherCode = data.current_weather.weathercode;
    const temp = Math.round(data.current_weather.temperature);

    document.getElementById('temperature').textContent = `${temp}°F`;
    document.getElementById('weather-icon').textContent = weatherIcons[weatherCode] || '🌡️';
  } catch (err) {
    console.error('Weather fetch error:', err);
  }
}

// Update time every second
setInterval(updateTime, 1000);
updateTime();

// Update weather every 10 minutes
updateWeather();
setInterval(updateWeather, 600000);
</script>
</body>
</html>
